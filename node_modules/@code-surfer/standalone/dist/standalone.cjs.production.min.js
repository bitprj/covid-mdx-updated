"use strict";var e,t=(e=require("react"))&&"object"==typeof e&&"default"in e?e.default:e,n=require("@code-surfer/step-parser"),r=require("@code-surfer/themes");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){var n=e.body;return t.createElement("div",{style:{background:"#290000",color:"#b96f70",border:"2px solid #b96f70",padding:"10px 30px",maxWidth:"90vw",margin:"0 auto",fontFamily:"monospace",fontSize:"1rem"}},t.createElement("h3",null,e.header),t.createElement("p",null,n))}function s(e){var t=window.getComputedStyle(e),n=parseFloat(t.marginTop||"0")+parseFloat(t.marginBottom||"0");return e.offsetHeight+n}require("prismjs/components/prism-markup"),require("prismjs/components/prism-bash"),require("prismjs/components/prism-clike"),require("prismjs/components/prism-c"),require("prismjs/components/prism-cpp"),require("prismjs/components/prism-css"),require("prismjs/components/prism-css-extras"),require("prismjs/components/prism-javascript"),require("prismjs/components/prism-jsx"),require("prismjs/components/prism-js-extras"),require("prismjs/components/prism-coffeescript"),require("prismjs/components/prism-diff"),require("prismjs/components/prism-git"),require("prismjs/components/prism-go"),require("prismjs/components/prism-graphql"),require("prismjs/components/prism-json"),require("prismjs/components/prism-less"),require("prismjs/components/prism-makefile"),require("prismjs/components/prism-markdown"),require("prismjs/components/prism-objectivec"),require("prismjs/components/prism-ocaml"),require("prismjs/components/prism-python"),require("prismjs/components/prism-reason"),require("prismjs/components/prism-sass"),require("prismjs/components/prism-scss"),require("prismjs/components/prism-sql"),require("prismjs/components/prism-stylus"),require("prismjs/components/prism-typescript"),require("prismjs/components/prism-wasm"),require("prismjs/components/prism-yaml");var u={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},a=250,c=0,p=.25,l=.75,m=1;function f(){return{}}function d(e,t,n,r){return w([[p,void 0],[l,void 0],[m,b(function(n){return{opacity:k(e,t,n)}},n,r)]],{opacity:e})}function h(e,t,n,r){return w([[p,b(function(n){return{opacity:k(e,t,n)}},n,r)],[l,void 0],[m,void 0]],{opacity:e})}function v(e){return void 0===e&&(e=0),w([[.5,q(e)],[1,x(e)]])}function y(e){return void 0===e&&(e=0),w([[.5,void 0],[1,x(e)]],{opacity:0})}function g(e){return void 0===e&&(e=0),w([[.5,q(e)],[1,void 0]])}function E(e){return function(t){return{height:k(e,c,t,u.easeInOutCubic)}}}function j(e){return function(t){return{height:k(c,e,t,u.easeInOutCubic)}}}function q(e){return void 0===e&&(e=0),function(t){return{opacity:k(1,e,t)}}}function x(e){return void 0===e&&(e=0),function(t){return{opacity:k(e,1,t)}}}function k(e,t,n,r){return void 0===r&&(r=u.linear),e+(t-e)*r(n)}function w(e,t){return void 0===t&&(t={}),function(n){for(var r=Object.assign({},t),i=0,o=0;o<e.length;o++){var s=e[o],u=s[0],a=s[1];if(a&&Object.assign(r,a(n>u?1:(n-i)/(u-i))),n<u)return r;i=u}return r}}function b(e,t,n,r){if(void 0===r&&(r=.3),n<=1)return e;var i=r/(n-1)*t,o=1-r+i;return function(t){var n=Math.max(0,Math.min(1,(t-i)/(o-i)));return e(n)}}function M(e,t){if(!e)return null;if(!t||!e.dimensions)throw new Error("Can't get zoom without dimensions");var n=t.containerWidth,r=t.contentWidth,i=e.dimensions,o=e.focusCount*t.lineHeight,s=t.containerHeight-2*Math.max(i.paddingBottom,i.paddingTop);return Math.min(s/o,1,.9*n/r)}function O(e){var n=e.stepPair,r=e.t,o=e.tokens,s=e.types,u=e.dimensions,c=e.unfocusedStyle,v=t.useMemo(function(){var e=n.selectMany(function(e){return e.lines.map(function(t,n){return{key:t,focus:e.focus[n]}})}),r=e.map(function(e,t){var n=e.spread()[0],r=e.select(function(e){return e.focus}).spread(),i=r[0],o=r[1];return!n||!i&&o||o&&Array.isArray(i)?t:-1}).filter(function(e){return-1!==e}),i=e.map(function(e,t){var n=e.spread()[1],r=e.select(function(e){return e.focus}).spread(),i=r[0],o=r[1];return!n||!o&&i||i&&Array.isArray(o)?t:-1}).filter(function(e){return-1!==e});return e.map(function(e,n){var v=c.opacity,y=e.spread(),g=y[0],q=y[1],x=e.select(function(e){return e.focus}).spread(),M=x[0],O=x[1],S=!(!g||!q||M!==O),A=!(!S&&(Array.isArray(M)||Array.isArray(O))),H=A&&o[n].map(function(e,r){return t.createElement("span",{className:"token-"+s[n][r],key:r},e)}),C=(u||{}).lineHeight,I=S&&t.createElement("div",{style:{overflow:"hidden",opacity:M?void 0:v,height:C},key:n},t.createElement("div",{style:{display:"inline-block"},className:"cs-line cs-line-"+n},H)),W=f;if(!S)if(g)if(q)if(M||!O||Array.isArray(O)){if(M&&!O&&!Array.isArray(M)){var P=i.indexOf(n);W=h(1,v,P,i.length)}}else{var T=r.indexOf(n);W=d(v,1,T,r.length)}else{var N=i.indexOf(n);W=function(e,t,n,r,o){return void 0===o&&(o=100),w([[p,b((s=e,u=t,function(e){return{opacity:k(s,u,e),transform:"translateX("+k(0,-a,e)+"px)"}}),N,i.length)],[l,E(o)],[m,void 0]],{height:o});var s,u}(M?1:v,Array.isArray(M)?1:0,0,0,C)}else{var Q=r.indexOf(n);W=function(e,t,n,r,i){return void 0===i&&(i=100),w([[p,void 0],[l,j(i)],[m,b((o=e,s=t,function(e){return{opacity:k(o,s,e),transform:"translateX("+k(a,0,e)+"px)"}}),n,r)]],{transform:"translateX("+a+"px)",height:0,opacity:0});var o,s}(Array.isArray(O)?1:0,O?1:v,Q,r.length,C)}var _=f;if(!A){var L=o[n].map(function(e,t){return Array.isArray(M)?M.includes(t):M}),B=o[n].map(function(e,t){return Array.isArray(O)?O.includes(t):O}),z=r.indexOf(n),F=i.indexOf(n);_=function(e,t){var n=g?L[t]?1:v:0,o=q?B[t]?1:v:0;return(n<o?d(n,o,z,r.length):h(n,o,F,i.length))(e)}}return{lineKey:n,lineElement:I,tokenElements:H,getLineStyle:W,getTokenStyle:_}})},[n]);return t.createElement(t.Fragment,null,v.map(function(e){var n=e.lineKey,u=e.tokenElements,a=e.getTokenStyle;return e.lineElement||t.createElement("div",{style:i({overflow:"hidden"},(0,e.getLineStyle)(r)),key:n},t.createElement("div",{style:{display:"inline-block"},className:"cs-line cs-line-"+n},u||o[n].map(function(e,i){return t.createElement("span",{className:"token-"+s[n][i],style:a(r,i),key:i},e)})))}))}var S=function(){function e(e,t){this.prev=e,this.next=t}var t=e.prototype;return t.spread=function(){return[this.prev,this.next]},t.select=function(t){var n=this.spread(),r=n[0],i=n[1];return new e(null===r?null:void 0===r?void 0:t(r),null===i?null:void 0===i?void 0:t(i))},t.selectMany=function(e){var t=this.spread(),n=t[0],r=t[1],i=null===n?null:void 0===n?void 0:e(n),o=null===r?null:void 0===r?void 0:e(r);return new A(i,o)},t.any=function(){var e=this.spread(),t=e[0];return null==t?e[1]:t},t.get=function(e){throw Error("Get only supported in ArrayTuple")},t.map=function(e){throw Error("Map only supported in ArrayTuple")},e}(),A=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i._getChildrenMap=function(){if(!this._dict){var e=this.spread(),t=e[1]||[],n=new Map((e[0]||[]).map(function(e){return[e.key,{prev:e}]}));t.forEach(function(e){var t=n.get(e.key)||{prev:void 0};n.set(e.key,{prev:t.prev,next:e})});var r=Array.from(n.keys());r.sort(function(e,t){return e<t?-1:e>t?1:0}),this._dict=new Map(r.map(function(e){var t=n.get(e)||{},r=t.prev,i=t.next;return[e,new S(void 0===r?void 0:r,void 0===i?void 0:i)]}))}return this._dict},i.get=function(e){return this._getChildrenMap().get(e)},i.map=function(e){var t=this,n=this._getChildrenMap(),r=[];return n.forEach(function(n,i){return r.push(e(n,i,t))}),r},r}(S);function H(e){var n=e.progress,r=e.dimensions,i=e.steps,o=e.tokens,s=e.types,u=i[Math.floor(n)],a=i[Math.floor(n)+1],c=t.useMemo(function(){return new S(u,a)},[u,a]),p=t.useMemo(function(){return c.select(function(e){return e.title})},[c]),l=t.useMemo(function(){return c.select(function(e){return e.subtitle})},[c]),m=n%1;return t.createElement("div",{className:"cs-container",style:{width:"100%",height:r?r.containerHeight:"100%",maxHeight:"100%",position:"relative"}},t.createElement(C,{dimensions:r,stepPair:c,t:m,tokens:o,types:s}),t.createElement(I,{textPair:p,t:m}),t.createElement(W,{textPair:l,t:m}))}function C(e){var n=e.dimensions,i=e.stepPair,o=e.t,s=e.tokens,a=e.types,c=t.useRef(null),f=t.useMemo(function(){return function(e,t){if(!t)return function(){return 1};var n=e.spread(),r=n[1],i=M(n[0],t),o=M(r,t);return function(e){return k(i||o,o||i,e,u.easeInOutQuad)}}(i,n)},[i,n]),d=t.useMemo(function(){return function(e,t){if(!t)return function(){return 0};var n=e.spread(),r=n[0],i=n[1],o=r?r.focusCenter*t.lineHeight:0,s=i?i.focusCenter*t.lineHeight:0,a=w([[p,void 0],[l,function(e){return{scroll:k(o,s,e,u.easeInOutCubic)}}],[m,void 0]],{scroll:o});return function(e){return a(e).scroll}}(i,n)},[i,n]),h=f(o),v=d(o),y=n?n.containerHeight/2+v:0;t.useLayoutEffect(function(){null!=c.current&&(c.current.scrollTop=v)},[v]);var g=r.useUnfocusedStyle();return t.createElement(r.Styled.Pre,{className:"cs-content",ref:c,style:{margin:0,height:"100%",overflow:"hidden"}},t.createElement(r.Styled.Code,{className:"cs-scaled-content",style:{display:"block",height:n?n.contentHeight:"100%",width:n&&n.contentWidth,margin:n&&"0 "+(n.containerWidth-n.contentWidth)/2+"px",transform:"scale("+h+")",transformOrigin:"center "+y+"px"}},t.createElement("div",{style:{height:n&&n.containerHeight/2}}),t.createElement(O,{stepPair:i,t:o,tokens:s,types:a,dimensions:n,unfocusedStyle:g}),t.createElement("div",{style:{height:n&&n.containerHeight/2}})))}function I(e){var n=e.textPair,i=e.t;if(!n.any())return null;var o=n.spread(),s=o[0],u=o[1],a=i<.5?s:u,c=s!==u?v()(i):void 0,p=s&&u?void 0:s?g()(i):y()(i);return t.createElement(r.Styled.Title,{className:"cs-title",style:p},t.createElement("span",{style:c},a))}function W(e){var n=e.textPair,i=e.t;if(!n.any())return null;var o=n.spread(),s=o[0],u=o[1],a=i<.5?s:u,c=s!==u?v()(i):void 0,p=s&&u?void 0:s?g()(i):y()(i);return t.createElement(r.Styled.Subtitle,{className:"cs-subtitle",style:p},t.createElement("span",{style:c},a))}function P(e){var n=e.progress,r=e.steps,o=e.tokens,u=e.types,a=t.useMemo(function(){return function(e,t){for(var n=0,r=100,o=1;o<t.length&&(t[o].length<r&&(r=t[o].length,n=o),!(r<=1));o++);var s=e.map(function(e){var t=i({},e,{lines:e.lines.map(function(e){return n}),longestLineIndex:0});return t.lines[0]=e.lines[e.longestLineIndex],t});return s[0]=e[0],s}(r,o)},[r]),c=t.useRef(null),p=function(e,n){var r,o=t.useState(null),u=o[0],a=o[1];return r=function(){return a(null)},t.useEffect(function(){return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[a]),t.useLayoutEffect(function(){if(e.current&&!u){var t=e.current.querySelectorAll(".cs-container"),r=Array.from(t).map(function(e,t){return function(e,t){var n=e.querySelector(".cs-line-"+t.lines[t.longestLineIndex]),r=e.parentElement,i=e.querySelector(".cs-title"),o=e.querySelector(".cs-subtitle"),u=t.lines.length,a=e.scrollHeight-(r.scrollHeight-r.clientHeight),c=n?n.clientHeight:0,p=i?s(i):c,l=o?s(o):c;return{lineHeight:c,contentHeight:u*c*2+a,contentWidth:n?n.clientWidth:0,paddingTop:p,paddingBottom:l,containerHeight:a,containerWidth:e.clientWidth}}(e,n[t])}),o=Math.max.apply(Math,r.map(function(e){return e.containerHeight})),c=Math.max.apply(Math,r.map(function(e){return e.containerWidth})),p=Math.max.apply(Math,r.map(function(e){return e.contentWidth})),l=Math.max.apply(Math,r.map(function(e){return e.lineHeight}));a({dimensions:{lineHeight:l,contentWidth:p,containerHeight:o,containerWidth:c,contentHeight:void 0},steps:n.map(function(e,t){return i({},e,{dimensions:{paddingTop:r[t].paddingTop,paddingBottom:r[t].paddingBottom}})})})}},[u]),u||{}}(c,r),l=p.dimensions,m=p.steps;return l&&m?t.createElement("div",{style:{height:"100%",width:"100%",overflow:"auto"},ref:c},t.createElement(H,{steps:m,progress:n,dimensions:l,tokens:o,types:u})):t.createElement("div",{ref:c,style:{overflow:"auto",height:"100%",width:"100%"}},a.map(function(e,n){return t.createElement("div",{key:n,style:{overflow:"auto",height:"100%",width:"100%"}},t.createElement(H,{steps:a,progress:n,tokens:o,types:u}))}))}function T(e){var r=e.progress,i=e.steps,o=e.parsedSteps,s=t.useMemo(function(){return o||n.parseSteps(i)},[i,o]),u=s.steps,a=s.tokens,c=s.types;if(!u||0===u.length)throw new Error("No steps");return t.createElement(P,{progress:r,steps:u,tokens:a,types:c})}exports.CodeSurfer=function(e){var n=e.theme,i=e.nonblocking,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(e,["theme","nonblocking"]),s=t.useState(i),u=s[0],a=s[1];return t.useEffect(function(){u&&a(!1)},[]),t.createElement(r.StylesProvider,{theme:n},u?t.createElement(r.Styled.Placeholder,null):t.createElement(T,Object.assign({},o)))},exports.UnknownError=function(e){return t.createElement(o,{header:"Oops, there's a problem",body:e.error.toString()})};
//# sourceMappingURL=standalone.cjs.production.min.js.map
